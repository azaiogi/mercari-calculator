
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>メルカリ報價計算器（第一階段報價）</title>
  <style>
@media (max-width: 768px) {
  body { padding: 1em; font-size: 1em; line-height: 1.6; background: #fffdf8; }
  h1 { font-size: 1.4em; }
  h2 { font-size: 1.1em; margin-top: 1.5em; }
  table { width: 100%; font-size: 0.9em; border-collapse: collapse; }
  th, td { padding: 0.4em; }
  input, button, select { font-size: 1em; padding: 0.5em; }
  .section { padding: 1em; margin-bottom: 1.5em; border-radius: 8px; background: #fffefc; }
}

@media (max-width: 600px) {
  body { padding: 1em; font-size: 1em; }
  h1 { font-size: 1.3em; }
  h2 { font-size: 1.1em; }
  table { font-size: 0.9em; }
  .section { padding: 0.8em; }
}
    body {
      font-family: sans-serif;
      padding: 2em;
      background-color: #fff7f2;
      color: #333;
      line-height: 1.6;
    }
    h1, h2 {
      color: #c44a00;
    }
    input[type="text"], input[type="number"] {
      padding: 0.5em;
      width: 100%;
      max-width: 300px;
      margin-bottom: 1em;
    }
    button {
      padding: 0.5em 1em;
      margin: 0.5em 0;
      background: #ffcc99;
      border: none;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1em;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.5em;
      text-align: left;
    }
    .section {
      margin-top: 2em;
      padding: 1em;
      background-color: #fff2e0;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <details class="section" style="background:#fff9f0; border:1px solid #e0c8a0; padding:1em; border-radius:8px; margin-bottom:1em;">
  <summary style="font-size:1.1em; font-weight:bold; cursor:pointer;">📖 使用說明（點此展開／收合）</summary>
  <div style="margin-top:1em;">
    <p><strong>📌 本工具用途：</strong> 提供快速報價功能，供委託人計算從「日本 Mercari」購買商品的第一階段報價金額，並可整合多筆報價、一鍵複製報價文字給代購方。</p>

    <p><strong>🛒 操作步驟：</strong></p>
    <ol>
      <li><strong>貼上商品網址與日圓價格：</strong>請依序輸入 Mercari 商品連結與商品含稅金額。⚠️請依照日版網站金額填寫，避免誤報。</li>
      <li><strong>查看台幣報價：</strong>系統自動依下列規則轉換台幣金額：</li>
    </ol>
    <ul>
      <li>≦ ¥5000：價格 × 0.255 + 固定費 25 元</li>
      <li>¥5001～10000：價格 × 0.26</li>
      <li>> ¥10000：價格 × 0.255</li>
    </ul>
    <p>系統會自動加總多筆報價，並於下方顯示總台幣金額。</p>

    <p><strong>📝 複製整合報價貼文：</strong>點選「複製全部報價文字」，即可將下列格式文字複製給代購方：</p>
    <pre style="background:#fefefe; border:1px solid #ddd; padding:1em; white-space:pre-wrap;">
您好，想委託代購以下商品：
－
1. https://jp.mercari.com/item/xxxxx
日幣金額：¥2500
台幣報價：663 元
－
2. https://jp.mercari.com/item/yyyyy
日幣金額：¥888 
台幣報價：252 元 
－
台幣總金額：915 元
    </pre>

    <p><strong>📦 注意事項：</strong></p>
    <ul>
      <li>本工具僅提供第一階段報價估算，實際付款以代購方報價為主。</li>
      <li>請填寫含稅商品價格，日本內運費另行計算。</li>
      <li>第二階段費用（運費、包裝費等）將於台灣收取。</li>
    </ul>
  </div>
</details>

<h1 style="font-size: 1.8em;">メルカリ報價計算器<br>（第一階段報價）</h1>

  <div class="section">
    <h2>🔗 報價紀錄<br>（貼上網址 + 商品價格）</h2>
    <label for="itemUrl">Mercari 商品網址：</label>
    <input type="text" id="itemUrl" placeholder="https://..." />
    <br><label for="itemPrice">商品價格（日圓）：</label>
    <input type="number" id="itemPrice" placeholder="例如：2500" />
    <div style="text-align:center;">
<button onclick="addItem()">新增報價紀錄</button>
<button onclick="copySummary()" style="margin-left:1em;">複製全部報價文字</button>
</div>
<p style="color:#a00;font-weight:bold;">請按照日版mercari的商品金額輸入，若填寫錯誤將導致報價錯誤</p>
    <div id="itemTableWrapper">
      <table border="1" cellpadding="8" id="itemTable" style="font-size: 0.85em;">
        <thead><tr><th>商品網址</th><th>日圓金額</th><th>第一階段金額（台幣）</th><th>操作</th></tr></thead>
        <tbody></tbody>
      </table>
      <div id="totalDisplay" style="margin-top:1em;font-weight:bold;"></div>
      
    </div>
  </div>

  <div class="section">
    <h2>交易流程</h2>
    <ol>
      <li>傳送商品連結詢問報價（報價計算方式見下方費用說明）</li>
      <li>確認報價，付款第一階段全額後進行下單</li>
      <li>下單回報，等待商品抵達日本倉庫</li>
      <li>商品抵達日本倉後集運空運，約 3～5 個禮拜抵台</li>
      <li>到台灣後走賣貨便，第二階段費用貨到付款</li>
    </ol>
  </div>

  <div class="section">
    <h2>第一階段報價方式</h2>
    <ul>
      <li>¥1～¥5000：價格 × 0.255 + 25元固定費</li>
      <li>¥5001～¥10000：價格 × 0.26</li>
      <li>¥10001以上：價格 × 0.255</li>
      <li>如有日本境內運費，一律 × 0.25 計算</li>
    </ul>
  </div>

  <div class="section">
    <h2>快速複製收款帳號</h2>
    <ul>
      <li>
        台新銀行（812）：0028881806234931<br>
        <button onclick="copyText('0028881806234931')">複製台新帳號</button>
      </li>
      <li>
        中國信託（822）：0000901566111671<br>
        <button onclick="copyText('0000901566111671')">複製中信帳號</button>
      </li>
      <li>
        郵局（700）：00019900455364<br>
        <button onclick="copyText('00019900455364')">複製郵局帳號</button>
      </li>
    </ul>
</div>

<div class="section">
    <h2>付款與寄送方式</h2>
    <strong>付款：</strong>
    <ul>
      <li>以銀行匯款為主，可接受無卡</li>
      <li>主要使用台新，也提供中信／富邦／聯邦／郵局</li>
    </ul>
    <strong>寄送：</strong>
    <ul>
      <li>日本段：預設集運，急件可協議 EMS</li>
      <li>台灣段：預設賣貨便，如需郵寄可討論</li>
    </ul>
  </div>

  <div class="section">
    <h2>注意事項</h2>
    <ul>
      <li>本人有正職，無法即時回覆</li>
      <li>運費含包材、緩衝材重量，按比例分配，不以淨重計</li>
      <li>非日本在住，需回台後才能拆箱確認</li>
      <li>國際運送有風險，無法保證零損傷</li>
      <li>付款後無法取消或更改訂單</li>
      <li>不接受無物流碼寄送方式</li>
      <li>日拍默認商品為初傷／二手</li>
    </ul>
  </div>

  <script>
    
    function copyText(text) {
      navigator.clipboard.writeText(text).then(function() {
        alert("已複製帳號到剪貼簿！");
      }, function(err) {
        alert("複製失敗：" + err);
      });
    }

    function addItem() {
      const url = document.getElementById('itemUrl').value;
      const price = parseFloat(document.getElementById('itemPrice').value);
      if (!url || isNaN(price) || price <= 0) {
        alert('請輸入有效的網址與金額');
        return;
      }

      let quote = 0;
      if (price <= 5000) {
        quote = Math.ceil(price * 0.255 + 25);
      } else if (price <= 10000) {
        quote = Math.ceil(price * 0.26);
      } else {
        quote = Math.ceil(price * 0.255);
      }

      const tbody = document.querySelector("#itemTable tbody");
      const tr = document.createElement("tr");
      tr.innerHTML = `<td style="max-width:150px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;"><a href="${url}" target="_blank">${url}</a></td><td>¥${price}</td><td>${quote} 元</td><td><button onclick="this.parentElement.parentElement.remove(); updateTotal();">刪除</button></td>`;
      tbody.appendChild(tr);
      updateTotal();

      document.getElementById('itemUrl').value = '';
      document.getElementById('itemPrice').value = '';
    }

    function updateTotal() {
      let total = 0;
      document.querySelectorAll("#itemTable tbody tr").forEach(row => {
        const text = row.cells[2].innerText;
        const num = parseInt(text.replace(" 元", ""));
        total += num;
      });
      document.getElementById('totalDisplay').innerText = `總金額：${total} 元`;
    }

    function exportCSV() {
      let csv = "\uFEFF商品網址,日圓金額,第一階段金額(台幣)\n";
      document.querySelectorAll("#itemTable tbody tr").forEach(row => {
        const link = row.cells[0].querySelector("a");
        const href = link ? link.href : "";
        const rowText = [
          `=HYPERLINK("${href}", "${href}")`,
          row.cells[1].innerText,
          row.cells[2].innerText
        ].join(",");
        csv += rowText + "\n";
      });

      const blob = new Blob(["\uFEFF" + csv], { type: "text/csv;charset=utf-8;" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "報價紀錄.csv";
      link.click();
    }

    function copySummary() {
      let total = 0;
      let summary = "您好，想委託代購以下商品：\n";
      let i = 1;
      document.querySelectorAll("#itemTable tbody tr").forEach(row => {
        const link = row.cells[0].querySelector("a");
        const name = link ? link.innerText : "";
        const url = link ? link.href : "";
        const quote = row.cells[2].innerText;
        total += parseInt(quote.replace(" 元", ""));
        summary += `－\n${i}. ${name !== url ? name + "\n" : ""}${url}\n日幣金額：${row.cells[1].innerText}\n台幣報價：${quote}\n`;
        i++;
      });
      summary += "－\n台幣總金額：" + total + " 元\n";
      navigator.clipboard.writeText(summary).then(function() {
        alert("已複製全部報價文字！");
      }, function(err) {
        alert("複製失敗：" + err);
      });
    }
  </script>
</body>
</html>
